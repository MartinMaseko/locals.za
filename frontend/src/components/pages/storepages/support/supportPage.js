import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import React, { useState } from 'react';
import './supportStyle.css';
import axios from 'axios';
import { Link } from 'react-router-dom';
const API_URL = import.meta.env.VITE_API_URL;
const SupportPage = () => {
    // State to track which FAQ sections are expanded
    const [expandedSection, setExpandedSection] = useState(null);
    // Form submission states
    const [isSubmitting, setIsSubmitting] = useState(false);
    const [submitStatus, setSubmitStatus] = useState(null);
    // Function to toggle expanded/collapsed state
    const toggleSection = (sectionId) => {
        if (expandedSection === sectionId) {
            setExpandedSection(null);
        }
        else {
            setExpandedSection(sectionId);
        }
    };
    // Handle form submission
    const handleSupportFormSubmit = async (e) => {
        e.preventDefault();
        setIsSubmitting(true);
        setSubmitStatus(null);
        const form = e.target;
        const formData = new FormData(form);
        // Get form values
        const name = formData.get('name');
        const whatsapp = formData.get('whatsapp');
        const orderNo = formData.get('orderNo');
        const message = formData.get('message');
        try {
            // Send email to admin
            await axios.post(`${API_URL}/api/support/contact`, {
                name,
                whatsapp,
                orderNo: orderNo || 'Not provided',
                message,
                emailTo: 'admin@locals-za.co.za',
                subject: `Support Request: ${orderNo ? `Order #${orderNo}` : 'General Query'}`
            });
            // Show success message
            setSubmitStatus({
                type: 'success',
                message: 'Your query has been submitted successfully. We will get back to you soon.'
            });
            // Reset form
            form.reset();
        }
        catch (error) {
            console.error('Error submitting support form:', error);
            setSubmitStatus({
                type: 'error',
                message: 'There was an error submitting your query. Please try again or contact us directly via WhatsApp.'
            });
        }
        finally {
            setIsSubmitting(false);
        }
    };
    return (_jsxs("div", { className: "support-container", children: [_jsxs("div", { className: "support-header", children: [_jsx("h1", { children: "Support Center" }), _jsx("p", { children: "Find answers to common questions about using Locals.ZA" })] }), _jsxs("div", { className: "support-content", children: [_jsxs("div", { className: "faq-section", children: [_jsx("h2", { children: "About LocalsZA" }), _jsxs("div", { className: "faq-item", children: [_jsx("div", { className: "faq-question", onClick: () => toggleSection('who-is-localsza-for'), children: _jsx("h3", { children: "Who is LocalsZA for?" }) }), expandedSection === 'who-is-localsza-for' && (_jsxs("div", { className: "faq-answer", children: [_jsx("p", { children: "LocalsZA is an exclusive supply chain aggregator and last-mile delivery service built for SMME business owners:" }), _jsxs("ul", { children: [_jsx("li", { children: "Spaza Shops" }), _jsx("li", { children: "Salons" }), _jsx("li", { children: "Food Outlets" })] }), _jsx("p", { children: "We focus on helping you consolidate suppliers, secure lower prices on fast-moving stock, and drastically reduce your transport costs." })] }))] }), _jsxs("div", { className: "faq-item", children: [_jsx("div", { className: "faq-question", onClick: () => toggleSection('service-area'), children: _jsx("h3", { children: "What is the service area?" }) }), expandedSection === 'service-area' && (_jsx("div", { className: "faq-answer", children: _jsx("p", { children: "We currently service (Kathorus) Katlehong, Vosloorus, Thokoza and surrounding areas. Please ensure your delivery address falls within this area when placing an order." }) }))] })] }), _jsxs("div", { className: "faq-section", children: [_jsx("h2", { children: "Orders & Placing Orders" }), _jsxs("div", { className: "faq-item", children: [_jsx("div", { className: "faq-question", onClick: () => toggleSection('place-order'), children: _jsx("h3", { children: "How do I place an order?" }) }), expandedSection === 'place-order' && (_jsxs("div", { className: "faq-answer", children: [_jsx("p", { children: "Ordering your stock is fast and easy:" }), _jsxs("ul", { children: [_jsxs("li", { children: [_jsx("strong", { children: "Access our APP:" }), " Use the LocalsZA App on your mobile phone or tablet."] }), _jsxs("li", { children: [_jsx("strong", { children: "Browse & Select:" }), " View the consolidated list of products we offer at the best prices."] }), _jsxs("li", { children: [_jsx("strong", { children: "Checkout:" }), " Confirm your order and delivery details."] }), _jsxs("li", { children: [_jsx("strong", { children: "Payment:" }), " Payfast is our payment service provider with instant EFT secure payment options."] })] })] }))] }), _jsxs("div", { className: "faq-item", children: [_jsx("div", { className: "faq-question", onClick: () => toggleSection('modify-cancel-order'), children: _jsx("h3", { children: "Can I modify or cancel my order after it has been placed?" }) }), expandedSection === 'modify-cancel-order' && (_jsxs("div", { className: "faq-answer", children: [_jsx("p", { children: "Once your order has been successfully placed and the Instant EFT payment has been verified, we strongly advise against attempting to make any changes or cancellations." }), _jsxs("ul", { children: [_jsx("li", { children: "Our system immediately initiates the consolidation process with our wholesale partners to secure the best prices and delivery route." }), _jsx("li", { children: "Attempting to update an order after payment verification will cause delays and may result in the entire order being rejected from the delivery route." }), _jsx("li", { children: "If you absolutely must cancel or adjust an order, please contact the in-app support chat immediately. Any request made after the cutoff time (20:00 the day before a scheduled delivery day) will likely be refused." })] })] }))] })] }), _jsxs("div", { className: "faq-section", children: [_jsx("h2", { children: "Pricing & Payments" }), _jsxs("div", { className: "faq-item", children: [_jsx("div", { className: "faq-question", onClick: () => toggleSection('delivery-fee'), children: _jsx("h3", { children: "What is the delivery fee?" }) }), expandedSection === 'delivery-fee' && (_jsxs("div", { className: "faq-answer", children: [_jsx("p", { children: "We offer a flat-rate, affordable delivery fee of just R80 per delivery." }), _jsx("p", { children: "The R80 is a standard fee that helps us cover the costs of logistics and the first mile service of sourcing the best price and wholesaler to source from." })] }))] }), _jsxs("div", { className: "faq-item", children: [_jsx("div", { className: "faq-question", onClick: () => toggleSection('payment-methods'), children: _jsx("h3", { children: "How can I pay for my order?" }) }), expandedSection === 'payment-methods' && (_jsx("div", { className: "faq-answer", children: _jsx("p", { children: "We currently accept secure, instant payments via Instant EFT. Your order will only be processed and dispatched once the Instant EFT payment has been successfully verified." }) }))] })] }), _jsxs("div", { className: "faq-section", children: [_jsx("h2", { children: "Delivery & Tracking" }), _jsxs("div", { className: "faq-item", children: [_jsx("div", { className: "faq-question", onClick: () => toggleSection('delivery-days'), children: _jsx("h3", { children: "What are your delivery days?" }) }), expandedSection === 'delivery-days' && (_jsxs("div", { className: "faq-answer", children: [_jsx("p", { children: "To ensure optimal route efficiency and the lowest possible costs, LocalsZA delivers to the East of Johannesburg (Ekhuruleni) on three fixed days a week:" }), _jsx("p", { className: "highlight-text", children: "MONDAY, WEDNESDAY, and FRIDAY" })] }))] }), _jsxs("div", { className: "faq-item", children: [_jsx("div", { className: "faq-question", onClick: () => toggleSection('delivery-timing'), children: _jsx("h3", { children: "When will my delivery arrive?" }) }), expandedSection === 'delivery-timing' && (_jsxs("div", { className: "faq-answer", children: [_jsx("p", { children: "Your order's delivery day is based on the day you successfully place and pay for your order via Instant EFT:" }), _jsxs("ul", { children: [_jsxs("li", { children: [_jsx("strong", { children: "Sunday, Monday, or Tuesday" }), " \u2013 Delivery on Wednesday"] }), _jsxs("li", { children: [_jsx("strong", { children: "Wednesday or Thursday" }), " \u2013 Delivery on Friday"] }), _jsxs("li", { children: [_jsx("strong", { children: "Friday or Saturday" }), " \u2013 Delivery on Monday"] })] }), _jsx("p", { className: "important-note", children: "Important: You must successfully complete your Instant EFT payment by 12:00pm the day before a delivery day (e.g., Tuesday before 12pm for a Wednesday delivery) to ensure your stock is included in that day's route." })] }))] }), _jsxs("div", { className: "faq-item", children: [_jsx("div", { className: "faq-question", onClick: () => toggleSection('track-order'), children: _jsx("h3", { children: "How can I track my order?" }) }), expandedSection === 'track-order' && (_jsxs("div", { className: "faq-answer", children: [_jsxs("p", { children: [_jsx("strong", { children: "In-App Tracking:" }), " You can view the real-time status of your order directly on the tracking page within the LocalsZA App."] }), _jsxs("p", { children: [_jsx("strong", { children: "Notifications:" }), " We will send you app notifications to update you on your order's progress, from confirmation to dispatch and final delivery."] })] }))] })] }), _jsxs("div", { className: "faq-section", children: [_jsx("h2", { children: "Dealing with Issues & Damaged Goods" }), _jsxs("div", { className: "faq-item", children: [_jsx("div", { className: "faq-question", onClick: () => toggleSection('damaged-items'), children: _jsx("h3", { children: "What happens if an item is damaged upon arrival?" }) }), expandedSection === 'damaged-items' && (_jsxs("div", { className: "faq-answer", children: [_jsx("p", { children: "We prioritize the quality of your stock. We have a strict process to ensure all goods are collected from our wholesale partners in good order and properly secured for transport." }), _jsx("p", { children: "If, however, you find an item is damaged upon delivery, please follow this process:" }), _jsxs("ol", { children: [_jsxs("li", { children: [_jsx("strong", { children: "Do Not Accept:" }), " If the damage is visible upon arrival, please refuse to accept the specific damaged item from the delivery driver."] }), _jsxs("li", { children: [_jsx("strong", { children: "Notify Immediately:" }), " Make a note of the damage on the delivery slip and notify us immediately via the in-app support chat."] }), _jsxs("li", { children: [_jsx("strong", { children: "Take Photos:" }), " Use the LocalsZA App to take clear photos of the damaged item(s) and upload them to the support chat."] }), _jsxs("li", { children: [_jsx("strong", { children: "Resolution:" }), " Once the damage is verified, we will process a full refund or a credit to your account for the value of the damaged item."] })] })] }))] }), _jsxs("div", { className: "faq-item", children: [_jsx("div", { className: "faq-question", onClick: () => toggleSection('missing-items'), children: _jsx("h3", { children: "What happens if I receive a missing item?" }) }), expandedSection === 'missing-items' && (_jsxs("div", { className: "faq-answer", children: [_jsx("p", { children: "We perform a thorough check of all items before dispatch. In the unlikely event an item from your confirmed order is missing:" }), _jsxs("ul", { children: [_jsxs("li", { children: [_jsx("strong", { children: "Notify Within 2 Hours:" }), " If an item is truly missing, please notify us via the in-app support chat within four (4) hours of your delivery time."] }), _jsxs("li", { children: [_jsx("strong", { children: "Provide Details:" }), " Please provide your order number and the name and quantity of the missing product."] }), _jsxs("li", { children: [_jsx("strong", { children: "Resolution:" }), " After verification, we will process a full refund or a credit to your account for the value of the missing item. We cannot dispatch a single missing item due to route efficiency, so the resolution will always be a refund or credit."] })] })] }))] })] }), _jsxs("div", { className: "faq-section", children: [_jsx("h2", { children: "Returns & Refunds Policy" }), _jsxs("div", { className: "faq-item", children: [_jsx("div", { className: "faq-question", onClick: () => toggleSection('return-policy'), children: _jsx("h3", { children: "What is your returns & refunds policy?" }) }), expandedSection === 'return-policy' && (_jsxs("div", { className: "faq-answer", children: [_jsx("p", { children: "We focus on ensuring you get the correct, high-quality stock you ordered. Given the logistics of aggregating supplies and prioritizing fast delivery, our general policy is to handle issues via refunds/credits rather than accepting returns on correctly delivered goods." }), _jsx("p", { children: _jsx("strong", { children: "Refunds for Damaged or Missing Goods:" }) }), _jsxs("ul", { children: [_jsxs("li", { children: [_jsx("strong", { children: "Damaged Items:" }), " If an item is verified as damaged upon delivery (as per the \"Dealing with Issues & Damaged Goods\" section), a full refund or account credit for the value of the item will be processed."] }), _jsxs("li", { children: [_jsx("strong", { children: "Missing Items:" }), " If an item is verified as missing from your order (as per the \"Dealing with Issues & Damaged Goods\" section), a full refund or account credit will be processed."] }), _jsxs("li", { children: [_jsx("strong", { children: "Processing Time:" }), " Refunds are typically processed back to your original payment method (Instant EFT via Payfast) within 3-5 business days."] })] }), _jsx("p", { children: _jsx("strong", { children: "No Returns on Accepted Goods:" }) }), _jsx("ul", { children: _jsx("li", { children: "We do not accept returns for items that were correctly delivered, accepted, and signed for by the client, as our supply chain logistics do not support reverse delivery." }) })] }))] })] }), _jsxs("div", { className: "contact-section", children: [_jsx("div", { className: "contact-header", children: _jsx("h2", { children: "Need More Help?" }) }), _jsx("p", { children: "Our customer support team is here to assist you with any questions or concerns." }), _jsxs("div", { className: "contact-methods", children: [_jsxs("div", { className: "contact-method", children: [_jsx("h3", { children: "Get Support" }), _jsx("p", { children: "Fill out this form for assistance" }), _jsxs("form", { className: "support-form", onSubmit: handleSupportFormSubmit, children: [_jsxs("div", { className: "form-group", children: [_jsx("label", { htmlFor: "name", children: "Full Name" }), _jsx("input", { type: "text", id: "name", name: "name", required: true, placeholder: "Your full name" })] }), _jsxs("div", { className: "form-group", children: [_jsx("label", { htmlFor: "whatsapp", children: "WhatsApp Number" }), _jsx("input", { type: "text", id: "whatsapp", name: "whatsapp", required: true, placeholder: "e.g. 073 123 4567" })] }), _jsxs("div", { className: "form-group", children: [_jsxs("label", { htmlFor: "orderNo", children: ["Order Number ", _jsx("span", { className: "optional", children: "(Optional)" })] }), _jsx("input", { type: "text", id: "orderNo", name: "orderNo", placeholder: "#OrderNo12345" })] }), _jsxs("div", { className: "form-group", children: [_jsx("label", { htmlFor: "message", children: "Message" }), _jsx("textarea", { id: "message", name: "message", required: true, rows: 4, placeholder: "Please describe your issue or question in detail" })] }), submitStatus && (_jsx("div", { className: `form-status ${submitStatus.type}`, children: submitStatus.message })), _jsx("button", { type: "submit", className: "submit-button", disabled: isSubmitting, children: isSubmitting ? 'Sending...' : 'Submit Query' })] }), _jsx("p", { className: "contact-hours", children: "We typically respond within 24 hours" })] }), _jsxs("div", { className: "contact-method", children: [_jsx("h3", { children: "Email Support" }), _jsx("p", { children: "admin@locals-za.co.za" }), _jsx("p", { className: "contact-hours", children: "Response within 24 hours" })] }), _jsxs("div", { className: "contact-method", children: [_jsx("h3", { children: "Drivers Login" }), _jsx(Link, { to: "/driver-login", className: "team-login-link", children: _jsx("img", { width: "45", height: "45", src: "https://img.icons8.com/liquid-glass/45/driver.png", alt: "driver" }) }), _jsx("h3", { children: "Buyers Login" }), _jsx(Link, { to: "/buyer-login", className: "team-login-link", children: _jsx("img", { width: "48", height: "48", src: "https://img.icons8.com/liquid-glass/48/men-age-group-5.png", alt: "men-age-group-5" }) })] }), _jsxs("div", { className: "contact-method", children: [_jsx("h3", { children: "WhatsApp Support" }), _jsx("p", { children: "Get in touch with our Sales Representative" }), _jsx("a", { href: "https://wa.me/27704158880", target: "_blank", rel: "noopener noreferrer", className: "whatsapp-link", "aria-label": "Contact us on WhatsApp", children: _jsx("div", { className: "whatsapp-icon pulsate", children: _jsx("img", { width: "48", height: "48", src: "https://img.icons8.com/color/48/whatsapp--v1.png", alt: "WhatsApp Support" }) }) }), _jsx("p", { className: "contact-hours", children: "Monday-Friday: 8am - 5pm" })] })] })] })] })] }));
};
export default SupportPage;
